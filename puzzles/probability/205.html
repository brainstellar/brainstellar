<!DOCTYPE html>
<!--page Coded by Varun Seth, downloaded from: http://brainstellar.com/puzzles/probability/205 -->
<html >
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">



<LINK href="/sizeless.css" rel="stylesheet" type="text/css">

<link rel="icon"
      type="image/gif"
      href="/favicon.gif" >

<link href="/favicon.gif"
	rel="shortcut icon"
	type="image/gif" >
<script type="text/javascript">
  function unhide(divID, pushID) {
    var item = document.getElementById(divID);
    if (item) {
      item.className=(item.className=='hidden')?'unhidden':'hidden';
    }
      pushID.className=(pushID.className=='push')?'pushed':'push';
  }


  function unhideandfb(divID, divFB ,pushID){

      var item = document.getElementById(divID);
    if (item) {
      item.className=(item.className=='hidden')?'unhidden':'hidden';
    }
      pushID.className=(pushID.className=='push')?'pushed':'push';
  document.getElementById( divFB).style.zIndex=-document.getElementById(divFB ).style.zIndex ;
  }


   function replaceContentInContainer( frameObj, matchClass, content) {
    var elems = frameObj.contentWindow.document.getElementsByTagName('*'), i;
	alert('asd');
    for (i in elems) {
        if((' ' + elems[i].className + ' ').indexOf(' ' + matchClass + ' ')
                > -1) {
            elems[i].innerHTML = content;
        }
    }
}



    function play2() {

	var iframes = document.getElementsByTagName('iframe');

	for(i=0; i< iframes.length; i++)
	{
      iframes[i].style.width = "300px";
	  iframes[i].style.background = "red";
	  }
	  i=iframes.length-1;
	  var foo = iframes[i].document.getElmentById('feedback_1eD3wVinaW8BFJjqN');
	  alert('hi');
    replaceContentInContainer( iframes[i], "fbFooterBorder" ,"hello");

    }


function play1(){

 document.getElementById("likehider").style.zIndex="-1";

}



  function disablefbwidget() { //cookie made for 1 year to disablefacebook
 var d = new Date();
    d.setTime(d.getTime() + (365*24*60*60*1000));
    document.cookie = "fbwidget=false; expires=" + d.toGMTString();
//	alert(getCookie("fbwidget"));
	location.reload();
  }
   function enablefbwidget() { //cookie deleted
   var d = new Date();
    d.setTime(d.getTime() + (365*24*60*60*1000));
	document.cookie = "fbwidget=true; expires=" + d.toGMTString();//fbwidget=; expires=Thu, 01 Jan 1970 00:00:00 GMT";
	location.reload();
  }
</script>
 <meta property="fb:app_id" content="685807501512723"/>
<meta property="og:type"            content="website" />
<meta property="og:url"             content="http://brainstellar.com/puzzles/205" />
<meta property="og:title"           content="Messing with Envelops | probability puzzles | Brainstellar - Puzzles from Quant Interviews" />
<meta property="og:image"           content="http://brainstellar.com/img/facebook.png" />

<meta property="og:site_name" content="Brainstellar - Puzzles from Quant Interviews" />
<meta property="og:description" content="There are n letters and n envelopes. Your servant puts the letters randomly in the envelopes so that each letter is in one envelope and all envelopes have exactly one letter. (Effectively a random permutation of n numbers chosen uniformly). Calculate the expected number of envelopes with correct letter inside them." />
<meta name="description" content="Brainstellar - Puzzles From Quant interview: There are n letters and n envelopes. Your servant puts the letters randomly in the envelopes so that each letter is in one envelope and all envelopes have exactly one letter. (Effectively a random permutation of n numbers chosen uniformly). Calculate the expected number of envelopes with correct letter inside them.Easy Puzzles, MEdium Puzzles, Hard Puzzles, Discrete maths, Probability Puzzles, Quant Puzzles, CSE Puzzles, CSE Blog, Tech interview, vseth iitk" />

<!--meta name="copyright" content="&copy; Varun Seth" -->
<meta name="dcterms.rightsHolder" content="Varun Seth" />

<meta name="Author" content="Varun Seth" />





 <title>Messing with Envelops | probability puzzles | Brainstellar - Puzzles from Quant Interviews</title>




</head>

<body ><div id="wrapper">



<div class="nav" tabindex="-1" onclick="this.focus()" >
    <div class="container-nav" >

<!--img src="favicon.gif" alt="BrainStellar" align="center"   -->



        <a href="/puzzles/" class="nav-links pagename" ><img src="/favicon.gif" style="border:0px solid white; padding:0px; margin-right:10px; border-radius:7px;height:35px;	" alt="BrainStellar"/> <img src="/img/cover_Transparent.png" alt="BRAINSTELLAR" style="position:relative;top:-7px;"></a>


        <a href="/puzzles/discrete/1" class="nav-links" >Discrete</a>
		   <a href="/puzzles/probability/1" class="nav-links">Probability</a>
		 <a href="/puzzles/strategy/1" class="nav-links">Strategy</a>
		 <a href="/puzzles/general/1" class="nav-links" >Tricks</a>
  </div>
</div>
<button class="btn-close btn btn-sm">Ã—</button>

<div class="container-outer"  style="padding:0px;" >


  <div class="row" style="padding:0px; margin:0px; "   >
   		<div class="col c9" style="margin:0px;padding:0px; ">

 


	<div class="stylishpage" >
		<div class="bord1" style="margin:0px; padding:0px; ">
		<div class="bord2" style="margin:0px; padding:0px; ">  <div style="text-align: center"> <br/><h2   style="text-align: center">  Probability puzzles </h2> <br/> </div> <div class="container" >  <br/> <br />
<table style="border:0px solid black; width:100%;padding:0px;margin:0px;">
	 <tr  style="padding:0px;margin:0px;">
    <td  style="padding:0px;margin:0px;border:0px solid black;width:20%;text" > <a class="btn  btn-sm btn-hard smooth" style="	" href="/puzzles/hard" title="More hard puzzles"> Hard  </a>
		  </td>


 <td   style="padding:0px;margin:0px;" > 	<div  class="content-text"  style="padding:0px;margin:0px;text-align: center; font-size:1.3em;"> <a href="https://brainstellar.com/puzzles/205" title="Permanent link to this post"> Messing with Envelops</a></div>
</td>

	<td  style="padding:0px;margin:0px;border:0px solid black; width:20%; max-width:80px;text-align:right">

<a class="btn  btn-sm link-white probability smooth" style="" href="/puzzles/probability" title="More probability puzzles"> Probability  </a>


</td>
  </tr>
</table><br /> <div  class="content-text">  There are n letters and n envelopes. Your servant puts the letters randomly in the envelopes so that each letter is in one envelope and all envelopes have exactly one letter. (Effectively a random permutation of n numbers chosen uniformly). Calculate the expected number of envelopes with correct letter inside them. </div><br/> <a class="push" href="javascript:void(0)" onclick="unhide('hint205', this) " > Hint</a><div   id="hint205" class="hidden"><div class="around">Linearity of expectation</div> </div> <br/>


		<a   class="push"  href="javascript:void(0)" onclick="unhideandfb('solution205', 'likehider205',this) " > Solution</a>
<br/>

		<div   id="solution205" class="hidden"> <div class="around" style="padding-top:1em;padding-bottom:1.5em;display:block;" >  Let I_i be a indicator random variable which takes<br />
1) value 1 if ith letter ends up in ith envelope.<br />
2) value 0, otherwise<br />
let I be r.v which indicates the number of letters which ended up in their respective envelopes.<br />
Now, I= I_1 +I_2+....+I_n<br />
E[I_i] = 1/n. for all i<br />
Using Linearity of Expectations E[I]= 1/n + 1/n +...+1/n = 1.<br/> <br/> <br/>  <br/> </div>

	  </div>	 <div  id="likehider205" style="z-index:-10;margin-left:auto;margin-right:auto ;   position:relative;top:-45px;" class="container-outer fbLikeContainer"><div style="float:left;" class="darkonfocus"  >Source: CSEblog<br/> </div><a  href="" style="font-size:0.7em; color:#9197a3;float:right;" onclick="enablefbwidget();" title="Click here to enable facebook comment and like box, to easily share your views and ask for help." >Enable Like and Comment</a> </div> <!--Comments not available for http://brainstellar.com/puzzles/probability/205--></div > 	</div></div></div> <div class="stylishpage" >
		<div class="bord1" style="margin:0px; padding:0px; ">
		<div class="bord2" style="margin:0px; padding:0px; "> <div class="container" >  <br/> <br />
<table style="border:0px solid black; width:100%;padding:0px;margin:0px;">
	 <tr  style="padding:0px;margin:0px;">
    <td  style="padding:0px;margin:0px;border:0px solid black;width:20%;text" > <a class="btn  btn-sm btn-hard smooth" style="	" href="/puzzles/hard" title="More hard puzzles"> Hard  </a>
		  </td>


 <td   style="padding:0px;margin:0px;" > 	<div  class="content-text"  style="padding:0px;margin:0px;text-align: center; font-size:1.3em;"> <a href="https://brainstellar.com/puzzles/206" title="Permanent link to this post"> Collecting Lucky coupons</a></div>
</td>

	<td  style="padding:0px;margin:0px;border:0px solid black; width:20%; max-width:80px;text-align:right">

<a class="btn  btn-sm link-white probability smooth" style="" href="/puzzles/probability" title="More probability puzzles"> Probability  </a>


</td>
  </tr>
</table><br /> <div  class="content-text">  A soda company is holding a contest where everyone who collects one each of N different coupons wins some prize. You get a coupon with each purchase of a soda, and each coupon is equally likely. What&rsquo;s the expected number of soda bottles you have to buy in order to collect all the coupons? </div><br/> <a class="push" href="javascript:void(0)" onclick="unhide('hint206', this) " > Hint</a><div   id="hint206" class="hidden"><div class="around">Linearity of expectation</div> </div> <br/>


		<a   class="push"  href="javascript:void(0)" onclick="unhideandfb('solution206', 'likehider206',this) " > Solution</a>
<br/>

		<div   id="solution206" class="hidden"> <div class="around" style="padding-top:1em;padding-bottom:1.5em;display:block;" >  Divide the whole process in to stages. Each stage ends with collecting a coupon which is new ( different from the coupons we already have )<br />
<br />
Let C_i be the random variable which denotes the number of coupons we buy in the stage i.<br />
<br />
Let C be the random variable which denotes the number of coupons we buy in order to get all n coupons<br />
Now,<br />
C= C_1 + C_2 + ... + C_n<br />
Note C_1 = 1;<br />
In general, while we are during stage i , we already have with us (i-1) different coupons. So, the probability of getting a new coupon is p_i = n-(i-1)/n. Also note that each C_i is a Geometrically distributed random variable with success probability equal to p_i. So, E(C_i) = 1/p_i = n/(n-i+1).<br />
By using Linearity of Expectations,<br />
E(C) = E(C_1) +E(C_2) + ...+E(C_n)<br />
= n(1/n + 1/(n-1)+ ... +1)<br />
~ nlogn.<br/> <br/> <br/>  <br/> </div>

	  </div>	 <div  id="likehider206" style="z-index:-10;margin-left:auto;margin-right:auto ;   position:relative;top:-45px;" class="container-outer fbLikeContainer"><div style="float:left;" class="darkonfocus"  >Source: Quant Interview<br/> </div><a  href="" style="font-size:0.7em; color:#9197a3;float:right;" onclick="enablefbwidget();" title="Click here to enable facebook comment and like box, to easily share your views and ask for help." >Enable Like and Comment</a> </div> <!--Comments not available for http://brainstellar.com/puzzles/probability/205--></div > 	</div></div></div> <div class="stylishpage" >
		<div class="bord1" style="margin:0px; padding:0px; ">
		<div class="bord2" style="margin:0px; padding:0px; "> <div class="container" >  <br/> <br />
<table style="border:0px solid black; width:100%;padding:0px;margin:0px;">
	 <tr  style="padding:0px;margin:0px;">
    <td  style="padding:0px;margin:0px;border:0px solid black;width:20%;text" > <a class="btn  btn-sm btn-hard smooth" style="	" href="/puzzles/hard" title="More hard puzzles"> Hard  </a>
		  </td>


 <td   style="padding:0px;margin:0px;" > 	<div  class="content-text"  style="padding:0px;margin:0px;text-align: center; font-size:1.3em;"> <a href="https://brainstellar.com/puzzles/207" title="Permanent link to this post"> The Noodles</a></div>
</td>

	<td  style="padding:0px;margin:0px;border:0px solid black; width:20%; max-width:80px;text-align:right">

<a class="btn  btn-sm link-white probability smooth" style="" href="/puzzles/probability" title="More probability puzzles"> Probability  </a>


</td>
  </tr>
</table><br /> <div  class="content-text">  You have 100 noodles in your soup bowl. You are told to take two ends of some noodles (each end on any noodle has the same probability of being chosen) in your bowl and connect them. You continue until there are no free ends. What is the expected number of loops? What is the probability of making one large loop which includes every noodle?  </div><br/> <a class="push" href="javascript:void(0)" onclick="unhide('hint207', this) " > Hint</a><div   id="hint207" class="hidden"><div class="around">Expected number of noodles come from linearity of expectation. Probability comes from multiplying independent probabilities.</div> </div> <br/>


		<a   class="push"  href="javascript:void(0)" onclick="unhideandfb('solution207', 'likehider207',this) " > Solution</a>
<br/>

		<div   id="solution207" class="hidden"> <div class="around" style="padding-top:1em;padding-bottom:1.5em;display:block;" >  First calculate expected number of loops:<br />
Denote X1 = identity variable, which takes value 1 every time a (long) noodle becomes a loop by connecting to its end, (if its own end is connected to some other noodle, then that other noodle's end will be considered). Thus, number of loops = X1 +...+ X100, thus, expected number of loops = E(X1) + ... + E(X100). This will give answer = 1/(2N-1) + 1/(2N-3) + ... + 1/3 + 1<br />
where N = 100. This formula can also be proved using induction.<br />
<br />
Calculating Probability of single large loop:<br />
If you followed last result, this one is simple, this time all the identitiy variables are zero except last one. Thus probability is [1 - 1/(2N-1)]*[ 1 - 1/(2N-3)]* ... *[1-1/3]<br />
= Product ( i = 2 to N) [ (2i-2) / (2i-1)]<br/> <br/> <br/>  <br/> </div>

	  </div>	 <div  id="likehider207" style="z-index:-10;margin-left:auto;margin-right:auto ;   position:relative;top:-45px;" class="container-outer fbLikeContainer"><a  href="" style="font-size:0.7em; color:#9197a3;float:right;" onclick="enablefbwidget();" title="Click here to enable facebook comment and like box, to easily share your views and ask for help." >Enable Like and Comment</a> </div> <!--Comments not available for http://brainstellar.com/puzzles/probability/205--></div > 	</div></div></div> <div class="stylishpage" >
		<div class="bord1" style="margin:0px; padding:0px; ">
		<div class="bord2" style="margin:0px; padding:0px; "> <div class="container" >  <br/> <br />
<table style="border:0px solid black; width:100%;padding:0px;margin:0px;">
	 <tr  style="padding:0px;margin:0px;">
    <td  style="padding:0px;margin:0px;border:0px solid black;width:20%;text" > <a class="btn  btn-sm btn-hard smooth" style="	" href="/puzzles/hard" title="More hard puzzles"> Hard  </a>
		  </td>


 <td   style="padding:0px;margin:0px;" > 	<div  class="content-text"  style="padding:0px;margin:0px;text-align: center; font-size:1.3em;"> <a href="https://brainstellar.com/puzzles/208" title="Permanent link to this post"> Distinct Number Draws</a></div>
</td>

	<td  style="padding:0px;margin:0px;border:0px solid black; width:20%; max-width:80px;text-align:right">

<a class="btn  btn-sm link-white probability smooth" style="" href="/puzzles/probability" title="More probability puzzles"> Probability  </a>


</td>
  </tr>
</table><br /> <div  class="content-text">  Given the set of numbers from 1 to n: { 1, 2, 3 .. n } We draw n numbers randomly (with uniform distribution) from this set (with replacement). What is the expected number of distinct values that we would draw? <br />
 </div><br/> <a class="push" href="javascript:void(0)" onclick="unhide('hint208', this) " > Hint</a><div   id="hint208" class="hidden"><div class="around">Linearity of expectation</div> </div> <br/> <a class="push" href="javascript:void(0)" onclick="unhide('answer208',this) " > Answer</a><div   id="answer208" class="hidden"><div class="around">E(n) = n[1-(1-1/n)^n]<br />
 </div></div> <br/>


		<a   class="push"  href="javascript:void(0)" onclick="unhideandfb('solution208', 'likehider208',this) " > Solution</a>
<br/>

		<div   id="solution208" class="hidden"> <div class="around" style="padding-top:1em;padding-bottom:1.5em;display:block;" >  Notice that number of distinct points in the produced set is same as number of distinct points selected from the given set {1..n} . For that we denote indicator function Si, that is, Si = 1 if the interger i is taken into produced set. <br />
<br />
Let S denote the number of distinct points selected, S = S1+..+Sn<br />
E(S) = E(S1) +...+ E(Sn)<br />
and E(Si) = 1*P(Si) = 1 - (Probability that 'i' is not chosen in any draw)<br />
<br />
= 1 - ( Prob that is i is not chosen in one 1st draw)^n = 1 - (  1 - 1/n )^n<br />
<br />
Thus E(S) = n * ( 1 - ( (n-1) / n)^n )<br/> <br/> <br/>  <br/> </div>

	  </div>	 <div  id="likehider208" style="z-index:-10;margin-left:auto;margin-right:auto ;   position:relative;top:-45px;" class="container-outer fbLikeContainer"><div style="float:left;" class="darkonfocus"  >Source: CSEblog<br/> </div><a  href="" style="font-size:0.7em; color:#9197a3;float:right;" onclick="enablefbwidget();" title="Click here to enable facebook comment and like box, to easily share your views and ask for help." >Enable Like and Comment</a> </div> <!--Comments not available for http://brainstellar.com/puzzles/probability/205--></div > 	</div></div></div> <div class="stylishpage" >
		<div class="bord1" style="margin:0px; padding:0px; ">
		<div class="bord2" style="margin:0px; padding:0px; "> <div class="container" >  <br/> <br />
<table style="border:0px solid black; width:100%;padding:0px;margin:0px;">
	 <tr  style="padding:0px;margin:0px;">
    <td  style="padding:0px;margin:0px;border:0px solid black;width:20%;text" > <a class="btn  btn-sm btn-hard smooth" style="	" href="/puzzles/hard" title="More hard puzzles"> Hard  </a>
		  </td>


 <td   style="padding:0px;margin:0px;" > 	<div  class="content-text"  style="padding:0px;margin:0px;text-align: center; font-size:1.3em;"> <a href="https://brainstellar.com/puzzles/209" title="Permanent link to this post"> Greed for an ACE</a></div>
</td>

	<td  style="padding:0px;margin:0px;border:0px solid black; width:20%; max-width:80px;text-align:right">

<a class="btn  btn-sm link-white probability smooth" style="" href="/puzzles/probability" title="More probability puzzles"> Probability  </a>


</td>
  </tr>
</table><br /> <div  class="content-text">  What is the expected number of cards that need to be turned over in a regular 52-card deck in order to see the first ace? </div><br/> <a class="push" href="javascript:void(0)" onclick="unhide('hint209', this) " > Hint</a><div   id="hint209" class="hidden"><div class="around">Hint: the locations of the four aces in the deck divide it into the five groups X1, ...,X5.</div> </div> <br/> <a class="push" href="javascript:void(0)" onclick="unhide('answer209',this) " > Answer</a><div   id="answer209" class="hidden"><div class="around">53/5 </div></div> <br/>


		<a   class="push"  href="javascript:void(0)" onclick="unhideandfb('solution209', 'likehider209',this) " > Solution</a>
<br/>

		<div   id="solution209" class="hidden"> <div class="around" style="padding-top:1em;padding-bottom:1.5em;display:block;" >  Define X1,X2&hellip;X48, such that Xi = 1 if ith card turns over before 4 aces, 0 otherwise. Thus, total number of cards turned to see first ace = 1 + sum (Xi)<br />
using linearity of expectation, E(X) = 1 + sum ( E(Xi))<br />
Now consider the ith card and the four aces, all the orders are equally likely: X,A,A,A,A Or A,X,A,A,A, or 3 others. They are equally likely when we have no knowledge about position of these Aces with respect of the deck. Hence we have 5 equally likely slots for ith card: 1 A 2 A 3 A 4 A 5. We are interested in 1st slot.<br />
Hence E(Xi) = 1/5 for all i = 1 to 48<br />
Thus E(X) = 1 + 48/5 = 53/5 = 10.6<br />
 <br />
This can be done by recursive equation  f(n) = (4/n)*1 + ((n-4)/n)*(1+f(n-1), where f(n)=expected cards to flip in a deck of n cards, but I definitely can't solve this without a computer.<br />
<br />
A shorter explanation is to consider the 52 cards uniformly distributed over (0,1), so on average they're at k/53 for k=1,2,3,&hellip;,52. The four aces are on average at 1/5, 2/5, 3/5, 4/5. So 0.2=k/53 implies k=10.6, done!<br/> <br/> <br/>  <br/> </div>

	  </div>	 <div  id="likehider209" style="z-index:-10;margin-left:auto;margin-right:auto ;   position:relative;top:-45px;" class="container-outer fbLikeContainer"><a  href="" style="font-size:0.7em; color:#9197a3;float:right;" onclick="enablefbwidget();" title="Click here to enable facebook comment and like box, to easily share your views and ask for help." >Enable Like and Comment</a> </div> <!--Comments not available for http://brainstellar.com/puzzles/probability/205--></div > <div class="container"><a  style="float:left;" class="btn  btn-sm link-medium smooth" href="/puzzles/probability/119" title="Breaking Stick "> Previous Puzzle  </a>      <a  style="float:right;" class="btn  btn-sm link-hard smooth"   href="/puzzles/probability/210" title="Random point on disk ">  <div class="arrow-right">  Next Page</div>
  </a>     <br/><br/> </div> <br/><br/> </div></div></div> 






	</div> <!-- finish col c9 -->
   		<div class="col c3" style="margin:0px;padding:0px; ">









		<div class="stylishpage" style=""  >
		<div class="bord1" style="margin:0px; padding:0px;">
		<div class="bord2" style="margin:0px; padding:0px;">
	<div class="container" style="text-align: center"> <!--style="background:white; border:1px solid #ccc; border-radius:7px"-->
<br/> <div style="padding:10px;margin-bottom:10px; border:1px solid #ccc"> Latest solved Puzzles </div> <a   class="btn  btn-sm link-hard smooth" style="font-size:1em" href="/puzzles/1020" title="hard puzzle "> Color Switches  </a>      <a   class="btn  btn-sm link-medium smooth" style="font-size:1em" href="/puzzles/1019" title="medium puzzle "> Weird Sequences  </a>      <a   class="btn  btn-sm link-hard smooth" style="font-size:1em" href="/puzzles/1018" title="hard puzzle "> Intersecting Pillars  </a>      <a   class="btn  btn-sm link-hard smooth" style="font-size:1em" href="/puzzles/1017" title="hard puzzle "> Consecutive sums  </a>      <a   class="btn  btn-sm link-medium smooth" style="font-size:1em" href="/puzzles/1016" title="medium puzzle "> Scaling a Square  </a>     <br/> <br/> <div style="padding:10px;margin-bottom:10px;border:1px solid #ccc"> Difficulty Level</div>
</div>
	<div style="padding:0px;margin:0px; text-align:center;border:0px">
		<a href="/puzzles/easy" class="btn  btn-sm link-easy" >Easy</a>
		<a href="/puzzles/medium" class="btn btn-sm  link-medium">Medium</a>
		<a href="/puzzles/hard" class="btn btn-sm  link-hard">Hard</a>
	</div>

	<div class="container" style="text-align: center">
	<br/>
	</div>
	</div></div></div> <!--3-->





</div></div>



</div>



<br/><br/>



<div style="width:100%;position:absolute;bottom:0px;">
<div class="container-outer" >

				<div class="stylishpage" style="margin:0px; padding:0px;" >
		<div class="bord1" style="margin:0px; padding:0px;">
		<div class="bord2" style="margin:0px; padding:0px;">

		<table style="width:100%;text-align:center;margin:0px; padding:0px;" class="darkonfocus">
		<tr>
		<td > &copy; BRAINSTELLAR
		</td>
		</tr>
		</table>

			</div></div></div> <!--3-->
</div></div>

</div><!--thin wrapper-->

 

</body> </html>
